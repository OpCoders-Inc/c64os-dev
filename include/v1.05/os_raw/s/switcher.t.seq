;----[ SWITCHER.T ]---------------------;∆OR THE ∆AST ¡PP ”WITCHER. ƒEFINES THE;WORKSPACE BANK, AND WHERE CERTAIN KEY;PROPERTIES ARE LOCATED IN THAT BANK.WORKBANK = $00 ;“≈’ BANK $00 WORKSPACE;”WITCHER IS FOUND AT APPBASE, JUST LIKE;LOADER AND THE BULK OF BOOTER.MAGICADR = $00 ;◊HERE "√64†œ”" MAGIC IS.;---------------------------------------;¬ANK œRDER: 32 BYTES, HOLDS ACCESS;ORDER OF BANK NUMBERS FROM $01 TO $20BANKORDR = $1AE0 ;->†$1AFF   (32 BYTES);¬ANK ÕAP: 1 PAGE, 256 BYTES,;1 BYTE FOR EACH OF UP TO 256 “≈’†BANKS.BANKMAP  = $1B00 ;-> $1BFF  (256 BYTES);¬ANK USAGE VALUES.BNK§NOTA = $FF  ;¬ANK ŒOT ¡VAILABLEBNK§FREE = $FE  ;¬ANK ŒOT ¡LLOCATEDBNK§EMPT = $FD  ;¬ANK ≈MPTY: ”WITCHABLEBNK§FULL = $FC  ;¬ANK ∆ULL:  »AS AN ¡PP;÷ALUES FROM $01 TO $20 IN THE BANKMAP;REPRESENT ALLOCATED BANKS, WHOSE OWNER;IS THE ¡PP ASSIGNED TO THAT BANK.;≈.G.,; ¡PP ÃAUNCHER IS IN BANK $01; ∆ILE ÕANAGER IS IN BANK $02; …MAGE ÷IEWER IS IN BANK $03;; …F BANKMAP+$14 HOLDS THE VALUE $03,; ‘HIS MEANS …MAGE ÷IEWER ALLOCATED “≈’; BANK NUMBER $14 FOR ITS OWN USE.;; …F THE ¡PPLICATION IN BANK $03 IS EVER; FORCEABLY EXPUNGED, ALL VALUES IN THE; BANKMAP THAT ARE CURRENTLY $03 GET; CHANGED TO BNK§FREE ($FE).;∆AST ¡PP ”WITCH ”LOTS: 4 PAGES.;32 ”LOTS AT 32 BYTES EACH.FASSLOTS = $1C00 ;->†$1FFF (1024 BYTES);‘HE INDEX INTO FASSLOTS IS THE BANKMAP;INDEX-1. ….E., IF AN ¡PPLICATION IS IN;BANK $03, ITS NAME APPEARS IN THE SLOT;FASSLOTS,2 OR (FASSLOTS+(32*2));‘EMPORARY ADDRESS WHERE AN ¡PP SETS;ITS STATE DURING APPFRZE HANDLER. ‘HIS;VALUE GETS COPIED TO THE ∆¡”†”LOT BY;SWITCHER BEFORE LOADING THE NEXT ¡PP.FSS§STAT = $03B8 ;‘EMPORARY ADDRESS;”TRUCTURE OF A ∆¡”†”LOTFAS§NAME = $00 ;16-CHARS + Œ’ÃÃFAS§STAT = $11 ;”AVED ”TATE;∆¡”†”LOT ”TATESFSS§SAFE = $00 ;”AVED AND QUITTABLEFSS§USAF = $01 ;’NSAVED CONTENT!;œPEN ∆ILE “EFERENCE PLACEHOLDEROPNFREFREU = $2000 ;->†$20FF (1 –AGE);”WITCHER PASSES AN OPEN FILE REFERENCE;BETWEEN BANKS BY FIRST COPYING IT TO;THE “≈’†WORKBANK AT OPNFREFREU.;“‘√†ƒRIVER √ACHERTCDRVRREU = $2100 ;-> $23FF (3 –AGES);‘HE BOOTER LOADS THE “‘√†DRIVER AND;RELOCATES IT TO $2100. ‘HEN STASHES IT;HERE IN WORKBANK. ”WITCHER SWAPS THIS;CODE IN, AND CALLS GETTIME, DURING;REURSTR TO REFRESH THE DATE/TIME.